# @title Texto de título predeterminado
import pandas as pd
import altair as alt

df = pd.read_csv("Datos visualización 1.csv", delimiter=';')

df['Inversión '] = pd.to_numeric(
    df['Inversión '].astype(str).str.replace(r'[\n\s]', '', regex=True),
    errors='coerce'
)


df['Fecha de estreno'] = pd.to_datetime(df['Fecha de estreno'], errors='coerce', format='%Y')


source = df.dropna(subset=['Fecha de estreno', 'Inversión '])


min_inversion_real = source['Inversión '].min()
max_inversion_real = source['Inversión '].max()


safe_min = min_inversion_real * 0.99


alt.Chart(source).mark_line(interpolate="monotone", point=True).encode(

    x=alt.X("Fecha de estreno:T", title="Año de Estreno"),


    y=alt.Y("Inversión :Q",
            title="Inversión Total",

            scale=alt.Scale(type="linear", domain=[safe_min, max_inversion_real]),


            axis=alt.Axis(format="~s")
           ),


    color="Título original:N",


    tooltip=["Título original:N", "Fecha de estreno:T", alt.Tooltip("Inversión :Q", format=",")]
).properties(
    title="Evolución de la Inversión de Películas Disney"
).interactive()